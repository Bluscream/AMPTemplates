[
    {
        "UpdateStageName":"Remove EXILED Files",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c 'cd scp-secret-laboratory/996560/AppData && rm -rf EXILED && cd \"SCP Secret Laboratory/PluginAPI/plugins/global\" && rm -rf \"Exiled Loader\" Exiled.Loader.dll dependencies/Exiled.API.dll'",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"false"
    },
    {
        "UpdateStageName":"Remove EXILED Files",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"Executable",
        "UpdateSourceData":"cmd.exe",
        "UpdateSourceArgs":"/C cd scp-secret-laboratory\\996560\\AppData && rd /S /Q EXILED && cd \"SCP Secret Laboratory\\PluginAPI\\plugins\\global\" && rd /S /Q \"Exiled Loader\" & del /Q Exiled.Loader.dll dependencies\\Exiled.API.dll",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"false"
    },
    {
        "UpdateStageName":"SteamCMD Server Download",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"SteamCMD",
        "UpdateSourceData":"996560",
        "UpdateSourceArgs":"700330"
    },
    {
        "UpdateStageName":"Config Directory Creation",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateDirectory",
        "UpdateSourceArgs":"{{$FullBaseDir}}AppData/config/{{$GamePort}}"
    },
    {
        "UpdateStageName":"Gameplay Config Template Copy",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CopyFilePath",
        "UpdateSourceData":"{{$FullBaseDir}}AppData/config/{{$GamePort}}/config_gameplay.txt",
        "UpdateSourceArgs":"{{$FullBaseDir}}ConfigTemplates/config_gameplay.template.txt",
        "OverwriteExistingFiles":false
    },
    {
        "UpdateStageName":"Remoteadmin Config Template Copy",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CopyFilePath",
        "UpdateSourceData":"{{$FullBaseDir}}AppData/config/{{$GamePort}}/config_remoteadmin.txt",
        "UpdateSourceArgs":"{{$FullBaseDir}}ConfigTemplates/config_remoteadmin.template.txt",
        "OverwriteExistingFiles":false
    },
    {
        "UpdateStageName":"Hoster Policy File Creation",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateFile",
        "UpdateSourceData":"gamedir_for_configs: true",
        "UpdateSourceArgs":"{{$FullBaseDir}}hoster_policy.txt",
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"EXILED Directory Creation",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c 'mkdir -p ~/.config/EXILED ; ln -sf ~/.config/EXILED \"{{$FullBaseDir}}AppData/EXILED\"'",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    },
    {
        "UpdateStageName":"EXILED Directory Creation",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"Executable",
        "UpdateSourceData":"cmd.exe",
        "UpdateSourceArgs":"/C mkdir \"%AppData%\\Roaming\\EXILED\" & mklink /J \"{{$FullBaseDir}}AppData\\EXILED\" \"%AppData%\\Roaming\\EXILED\"",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    },
    {
        "UpdateStageName":"Create EXILED Download Directory",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateDirectory",
        "UpdateSourceArgs":"{{$FullBaseDir}}AppData/Download",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    },
    {
        "UpdateStageName":"Download EXILED",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"GithubRelease",
        "UpdateSourceArgs":"Exiled-Team/EXILED",
        "UpdateSourceTarget":"{{$FullBaseDir}}AppData/Download",
        "UpdateSourceData":"Exiled.tar.gz",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true,
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    },
    {
        "UpdateStageName":"Install EXILED",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c '\\cp -rf scp-secret-laboratory/996560/AppData/Download/EXILED/* scp-secret-laboratory/996560/AppData/EXILED/ && \\cp -rf \"scp-secret-laboratory/996560/AppData/Download/SCP Secret Laboratory\" \"scp-secret-laboratory/996560/AppData/\" && rm -rf scp-secret-laboratory/996560/AppData/Download'",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    },
    {
        "UpdateStageName":"Install EXILED",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"Executable",
        "UpdateSourceData":"cmd.exe",
        "UpdateSourceArgs":"/C xcopy /E /Y /I scp-secret-laboratory\\996560\\AppData\\Download\\EXILED\\* scp-secret-laboratory\\996560\\AppData\\EXILED\\ && xcopy /E /Y /I \"scp-secret-laboratory\\996560\\AppData\\Download\\SCP Secret Laboratory\" \"scp-secret-laboratory\\996560\\AppData\\\" && rmdir /Q /S scp-secret-laboratory\\996560\\AppData\\Download",
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    },
    {
        "UpdateStageName":"Create Readme File",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateFile",
        "UpdateSourceArgs":"{{$FullBaseDir}}AppData/EXILED/README.txt",
        "UpdateSourceData":"WARNING: This directory may include the EXILED data of multiple SCP:SL servers\nrun on this system.\n\nIf viewing this directory from AMP’s ADS File Manager/SFTP, you will see the\nEXILED data of all SCP:SL servers run on this system, other than those run by\nAMP in Docker.\n\nYou will see the same EXILED data if viewing this directory from AMP’s File Manager/SFTP\nfor a particular SCP:SL instance that is NOT run in Docker.\n\nIf viewing this directory from AMP’s File Manager/SFTP for a particular SCP:SL\ninstance that IS run in Docker, you will only see the EXILED data of that instance.\n\nYou can also use the ADS File Manager/SFTP to view the save data of a SCP:SL\ninstance that is run in Docker by navigating to the following directory in the\ninstance’s datastore: .virtualhome/.config/EXILED.\n\nThe EXILED config data for a specific instance is linked to its port (as part of the\n-config.yaml file name) in the Configs subdirectory).\n\nEXILED data will not be automatically deleted when a non-Docker SCP:SL server is\nremoved, so you may need to delete the -config.yaml file if later creating\na new SCP:SL server with the same port.\n\nTake care when managing files in this directory or its subdirectories!",
        "OverwriteExistingFiles":true,
        "UpdateSourceConditionSetting":"InstallEXILED",
        "UpdateSourceConditionValue":"true"
    }
]