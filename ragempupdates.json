[
    {
        "UpdateStageName":"Setup Directory Creation",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"CreateDirectory",
        "UpdateSourceArgs":"{{$FullRootDir}}setup"
    },
    {
        "UpdateStageName":"7-Zip Directory Creation",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"CreateDirectory",
        "UpdateSourceArgs":"{{$FullRootDir}}7-Zip"
    },
    {
        "UpdateStageName":"7-Zip Installer Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"https://7-zip.org/a/7z2407-x64.exe",
        "UpdateSourceTarget":"{{$FullRootDir}}7-Zip",
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"7-Zip Console Tool Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"https://www.7-zip.org/a/7zr.exe",
        "UpdateSourceTarget":"{{$FullRootDir}}7-Zip",
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"RAGE:MP Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"https://cdn.rage.mp/public/files/RAGEMultiplayer_Setup.exe",
        "UpdateSourceTarget":"{{$FullRootDir}}setup",
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"RAGE:MP Files Extract",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"Executable",
        "UpdateSourceData":"cmd.exe",
        "UpdateSourceArgs":"/C cd ragemp\\7-Zip && 7zr.exe x -y -aoa 7z2407-x64.exe && cd ..\\setup && ..\\7-Zip\\7z.exe x -y -aoa RAGEMultiplayer_Setup.exe & del /Q /F RAGEMultiplayer_Setup.exe",
        "SkipOnFailure":true
    },
    {
        "UpdateStageName":"Modify config.xml",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"CreateFile",
        "UpdateSourceData":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<channel>prerelease_server</channel>",
        "UpdateSourceArgs":"{{$FullRootDir}}setup/config.xml",
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"RAGE:MP Installation",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"Executable",
        "UpdateSourceData":"cmd.exe",
        "UpdateSourceArgs":"/C cd ragemp/setup && .\\updater.exe && xcopy /E /Y /I server-files\\* ..\\server\\ && cd .. && rd /S /Q setup",
        "SkipOnFailure":false
    },
    {
        "UpdateStageName":"RAGE:MP Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"https://cdn.rage.mp/updater/prerelease/server-files/linux_x64.tar.gz",
        "UpdateSourceTarget":"{{$FullBaseDir}}",
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"RAGE:MP Installation",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c 'cd ragemp/server && tar -xzf linux_x64.tar.gz --strip-components=1 && rm -f linux_x64.tar.gz >/dev/null 2>&1'",
        "SkipOnFailure":false
    },
    {
        "UpdateStageName":"Resources Directory Creation",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"CreateDirectory",
        "UpdateSourceArgs":"{{$FullBaseDir}}dotnet/resources"
    },
    {
        "UpdateStageName":"Config File Download",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"https://raw.githubusercontent.com/Greelan/AMPTemplates/dev/ragempconf.json",
        "UpdateSourceTarget":"{{$FullBaseDir}}",
        "UpdateSourceArgs":"conf.json",
        "OverwriteExistingFiles":false
    }
]
