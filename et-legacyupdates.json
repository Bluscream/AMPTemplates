[
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"https://www.etlegacy.com/download/file/597",
        "UpdateSourceArgs":"et-legacy.zip",
        "UpdateSourceTarget":"{{$FullRootDir}}",
        "UnzipUpdateSource":true,
        "OverwriteExistingFiles":true,
        "DeleteAfterExtract":true
    },
    {
        "UpdateStageName":"Server Installation",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"Executable",
        "UpdateSourceData":"powershell.exe",
        "UpdateSourceArgs":"-NoProfile -Command \"Set-Location -Path 'et-legacy'; Copy-Item -Path 'etlegacy-*/*' -Destination 'server' -Recurse -Force -ErrorAction SilentlyContinue | Out-Null; Remove-Item -Path 'etlegacy-*' -Recurse -Force -ErrorAction SilentlyContinue | Out-Null\"",
        "SkipOnFailure":false
    },
    {
        "UpdateStageName":"Server Download",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"FetchURL",
        "UpdateSourceData":"https://www.etlegacy.com/download/file/590",
        "UpdateSourceArgs":"et-legacy.tar.gz",
        "UpdateSourceTarget":"{{$FullBaseDir}}",
        "UnzipUpdateSource":false,
        "OverwriteExistingFiles":true
    },
    {
        "UpdateStageName":"Server Installation",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c 'cd et-legacy/server && tar -xzf et-legacy.tar.gz --strip-components=1 && rm -rf et-legacy.tar.gz'"
    },
    {
        "UpdateStageName":"SteamCMD Game Download",
        "UpdateSourcePlatform":"All",
        "UpdateSource":"SteamCMD",
        "UpdateSourceData":"1873030",
        "UpdateSourceTarget":"{{$FullRootDir}}client",
        "ForceDownloadPlatform":"Windows"
    },
    {
        "UpdateStageName":"Client File Copy",
        "UpdateSourcePlatform":"Windows",
        "UpdateSource":"Executable",
        "UpdateSourceData":"cmd.exe",
        "UpdateSourceArgs":"/C xcopy /E /Y /I et-legacy\\client\\etmain\\pak*.pk3 et-legacy\\server\\etmain\\ && rd /S /Q et-legacy\\client\\"
    },
    {
        "UpdateStageName":"Client File Copy",
        "UpdateSourcePlatform":"Linux",
        "UpdateSource":"Executable",
        "UpdateSourceData":"/bin/bash",
        "UpdateSourceArgs":"-c '\\cp -rf ./et-legacy/client/etmain/pak*.pk3 ./et-legacy/server/etmain/ && rm -rf ./et-legacy/client/'"
    }
]
